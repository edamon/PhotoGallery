@using System.Globalization
@using PhotoGallery.Helpers
@{
    ViewBag.Title = "Events";
}
@section scripts{
    
    @Scripts.Render("~/bundles/backbone")

    <script type="text/javascript" src="@Url.Content("~/Scripts/moment.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/eventCalendar/eventCalendar.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.equalheights.js")"></script>
    
    <link href="@Url.Content("~/Content/EventCalendar.css")" rel="stylesheet">

    <script type="text/javascript">
        $(window).load(function() {
            $("#eventCalendar").calendarInit();
        });
    </script>
}

<div id="eventCalendar">
    <h2>Events</h2>
    <div class="row">
        <div class="calendar">
            <ul class="month-browser">
                <li class="calendar_nav"><a href="#" direction="previous">{{PreviousMonthString}}</a></li>
                <li id="current-month">{{CurrentMonthString}} {{CurrentYearString}}</li>
                <li class="calendar_nav"><a href="#" direction="next">{{NextMonthString}}</a></li>
            </ul>
            <ul class="weekdays">
                <li>SUNDAY</li>
                <li>MONDAY</li>
                <li>TUESDAY</li>
                <li>WEDNESDAY</li>
                <li>THURSDAY</li>
                <li>FRIDAY</li>
                <li>SATURDAY</li>
            </ul>
            <ul class="month">
                {{#each CalendarDays}}
                    <li class="{{#unless this.IsInCurrentMonth}}filler {{/unless}}{{#unless this.HasEvents}}empty {{/unless}}day">
                        <time datetime="{{this.DateString}}"><span class="day-name">{{this.DayOfWeek}},</span> <span class="month-name">{{this.MonthAbbreviation}} </span>{{this.DayOfMonth}}</time>
                        {{#if this.HasEvents}}
                            {{#each this.Events}}
                                <article>
                                    <header><a href="{{this.DetailsUrl}}" class="event-title">{{this.Title}}</a></header>
                                    <time datetime="{{this.DateString}}" class="event-time"></time>
                                    <address>{{this.Location}}</address>
                                    <div class="event-text">{{this.Description}}</div>
                                </article>                    
                            {{/each}}                            
                        {{/if}}
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>    
</div>
